(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6575],{56644:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var t=a(95155),c=a(12115),r=a(64983);function l(){let[e,s]=(0,c.useState)([]),[a,l]=(0,c.useState)(!0),[d,o]=(0,c.useState)(null),[n,i]=(0,c.useState)({sku:"",model:"",brand:"",price:"",stock_count:"",available:!1});(0,c.useEffect)(()=>{(async()=>{let{data:e,error:a}=await r.supabase.from("products").select("*").order("updated_at",{ascending:!1});a?console.error(a):s(e||[]),l(!1)})()},[]);let p=(e,a,t)=>{s(s=>s.map(s=>s.product_id===e?{...s,[a]:t}:s))},u=async e=>{let{error:s}=await r.supabase.from("products").update({...e,price:parseFloat(e.price),stock_count:parseInt(e.stock_count),updated_at:new Date().toISOString()}).eq("product_id",e.product_id);s?console.error(s):o(null)},h=async()=>{let e={...n,price:parseFloat(n.price),stock_count:parseInt(n.stock_count),available:n.available,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:a,error:t}=await r.supabase.from("products").insert([e]).select();t?console.error(t):(s(e=>[...a,...e]),i({sku:"",model:"",brand:"",price:"",stock_count:"",available:!1}))};return a?(0,t.jsx)("p",{className:"p-6",children:"Тауарлар жүктелуде..."}):(0,t.jsxs)("main",{className:"p-10",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Барлық тауарлар"}),(0,t.jsxs)("div",{className:"mb-6 p-4 border rounded bg-gray-50",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"➕ Жаңа тауар"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3",children:[["sku","model","brand","price","stock_count"].map(e=>(0,t.jsx)("input",{type:"price"===e||"stock_count"===e?"number":"text",placeholder:e,className:"border p-2 rounded",value:n[e],onChange:s=>i(a=>({...a,[e]:s.target.value}))},e)),(0,t.jsxs)("label",{className:"flex items-center space-x-1 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:n.available,onChange:e=>i(s=>({...s,available:e.target.checked}))}),(0,t.jsx)("span",{children:"Қол жетімді"})]}),(0,t.jsx)("button",{onClick:h,className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Қосу"})]})]}),(0,t.jsxs)("table",{className:"w-full text-sm border bg-white",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border px-2 py-1",children:"SKU"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Модель"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Бренд"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Бағасы"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Қалдық"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Қол жетімді"}),(0,t.jsx)("th",{className:"border px-2 py-1",children:"Әрекет"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{children:[["sku","model","brand","price","stock_count"].map(s=>(0,t.jsx)("td",{className:"border px-2 py-1",children:d===e.product_id?(0,t.jsx)("input",{className:"border p-1 w-full",type:"price"===s||"stock_count"===s?"number":"text",value:e[s],onChange:a=>p(e.product_id,s,a.target.value)}):e[s]},s)),(0,t.jsx)("td",{className:"border px-2 py-1 text-center",children:d===e.product_id?(0,t.jsx)("input",{type:"checkbox",checked:e.available,onChange:s=>p(e.product_id,"available",s.target.checked)}):e.available?"Иә":"Жоқ"}),(0,t.jsx)("td",{className:"border px-2 py-1 text-center",children:d===e.product_id?(0,t.jsx)("button",{onClick:()=>u(e),className:"text-green-600 hover:underline",children:"Сақтау"}):(0,t.jsx)("button",{onClick:()=>o(e.product_id),className:"text-blue-600 hover:underline",children:"Өңдеу"})})]},e.product_id))})]})]})}},64983:(e,s,a)=>{"use strict";a.r(s),a.d(s,{supabase:()=>t});let t=(0,a(34982).UU)("https://fjzbgaflzavzcwfoozcs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqemJnYWZsemF2emN3Zm9vemNzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczOTM4ODMsImV4cCI6MjA2Mjk2OTg4M30.mTC_-_hacoYgO4gAhXE1A9QoW-V6oS6UNfozzlrh_w4")},99418:(e,s,a)=>{Promise.resolve().then(a.bind(a,56644))}},e=>{var s=s=>e(e.s=s);e.O(0,[4982,8441,1684,7358],()=>s(99418)),_N_E=e.O()}]);