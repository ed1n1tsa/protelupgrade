(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6570],{35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},51867:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(95155),r=t(35695),o=t(12115),u=t(64983);function c(){let e=(0,r.useRouter)(),[s,t]=(0,o.useState)(!0),[c,l]=(0,o.useState)({products:0,users:0,orders:0,totalRevenue:0});return((0,o.useEffect)(()=>{(async()=>{var s;let{data:a}=await u.supabase.auth.getUser();if("izbasarraimbek373@gmail.com"!==(null==(s=a.user)?void 0:s.email))return e.push("/");let{count:r}=await u.supabase.from("products").select("*",{count:"exact",head:!0}),{count:o}=await u.supabase.from("profiles").select("*",{count:"exact",head:!0}),{count:c}=await u.supabase.from("orders").select("*",{count:"exact",head:!0}),{data:i}=await u.supabase.from("orders").select("total_price");l({products:r||0,users:o||0,orders:c||0,totalRevenue:(null==i?void 0:i.reduce((e,s)=>e+(s.total_price||0),0))||0}),t(!1)})()},[e]),s)?(0,a.jsx)("p",{className:"p-10",children:"CRM жүктелуде..."}):(0,a.jsxs)("main",{className:"p-10",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"ProTel әкімші панелі"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-10",children:[(0,a.jsx)(i,{title:"Тауарлар",value:c.products,onClick:()=>e.push("/admin/products")}),(0,a.jsx)(i,{title:"Пайдаланушылар",value:c.users,onClick:()=>e.push("/admin/users")}),(0,a.jsx)(i,{title:"Тапсырыстар",value:c.orders,onClick:()=>e.push("/admin/orders")}),(0,a.jsx)(i,{title:"Сатылым сомасы",value:c.totalRevenue.toLocaleString(),suffix:"₸"})]}),(0,a.jsxs)("div",{className:"space-x-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("/admin/upload"),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"XML жүктеу"}),(0,a.jsx)("button",{onClick:()=>e.push("/products"),className:"bg-gray-100 border px-4 py-2 rounded hover:bg-gray-200",children:"Каталогқа өту"})]})]})}function i(e){let{title:s,value:t,suffix:r="",onClick:o}=e;return(0,a.jsxs)("div",{onClick:o,className:"bg-white rounded shadow p-6 border ".concat(o?"cursor-pointer hover:bg-gray-50 transition":""),children:[(0,a.jsx)("h3",{className:"text-sm text-gray-500 mb-2",children:s}),(0,a.jsxs)("p",{className:"text-2xl font-bold",children:[t," ",(0,a.jsx)("span",{className:"text-base font-normal text-gray-600",children:r})]})]})}},64983:(e,s,t)=>{"use strict";t.r(s),t.d(s,{supabase:()=>a});let a=(0,t(34982).UU)("https://fjzbgaflzavzcwfoozcs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqemJnYWZsemF2emN3Zm9vemNzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczOTM4ODMsImV4cCI6MjA2Mjk2OTg4M30.mTC_-_hacoYgO4gAhXE1A9QoW-V6oS6UNfozzlrh_w4")},73156:(e,s,t)=>{Promise.resolve().then(t.bind(t,51867))}},e=>{var s=s=>e(e.s=s);e.O(0,[4982,8441,1684,7358],()=>s(73156)),_N_E=e.O()}]);