(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1012],{4217:(e,t,r)=>{var a=r(36713),n=/^\s+/;e.exports=function(e){return e?e.slice(0,a(e)+1).replace(n,""):e}},7985:(e,t,r)=>{e.exports="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g},16541:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addToCart:()=>i,clearCart:()=>l,getCart:()=>s,getUserId:()=>n,removeFromCart:()=>c,saveCart:()=>o});var a=r(64983);async function n(){var e;let{data:{session:t}}=await a.supabase.auth.getSession();return(null==t||null==(e=t.user)?void 0:e.id)||null}async function s(){let e=localStorage.getItem("cart"),t=await n();if(!e||!t)return[];try{let r=JSON.parse(e);if(r.userId!==t)return localStorage.removeItem("cart"),[];return r.items||[]}catch(e){return localStorage.removeItem("cart"),[]}}async function o(e){let t=await n();t&&localStorage.setItem("cart",JSON.stringify({userId:t,items:e}))}async function i(e){let t=await s(),r=t.find(t=>t.sku===e.sku);r?r.quantity+=1:t.push({...e,quantity:1}),await o(t)}async function c(e){let t=(await s()).filter(t=>t.sku!==e);await o(t)}async function l(){localStorage.removeItem("cart")}},20570:(e,t,r)=>{var a=r(24376),n=Object.prototype,s=n.hasOwnProperty,o=n.toString,i=a?a.toStringTag:void 0;e.exports=function(e){var t=s.call(e,i),r=e[i];try{e[i]=void 0;var a=!0}catch(e){}var n=o.call(e);return a&&(t?e[i]=r:delete e[i]),n}},23920:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(95155),n=r(35695),s=r(16541);function o(e){let{product:t}=e,r=(0,n.useRouter)();return(0,a.jsxs)("div",{className:"border p-4 rounded",children:[(0,a.jsx)("img",{src:t.img||"https://avatars.mds.yandex.net/get-yabs_performance/10256469/hat4203a5ade400c144c2a8a10ba165f94c/hugeX",alt:t.model,className:"mb-2 h-40 object-contain w-full"}),(0,a.jsx)("h3",{className:"font-semibold text-base",children:t.model}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Қалған саны: ",t.stock_count]}),(0,a.jsxs)("p",{className:"text-lg font-bold",children:[t.price.toLocaleString()," ₸"]}),(0,a.jsx)("button",{onClick:()=>{(0,s.addToCart)(t),r.push("/kz/client/cart")},className:"w-full mt-2 bg-black text-white py-1 rounded hover:bg-gray-800 transition",children:"Сатып алу"})]})}},24376:(e,t,r)=>{e.exports=r(82500).Symbol},35695:(e,t,r)=>{"use strict";var a=r(18999);r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},36713:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},36815:(e,t,r)=>{var a=r(4217),n=r(67460),s=r(70771),o=0/0,i=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(s(e))return o;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=a(e);var r=c.test(e);return r||l.test(e)?u(e.slice(2),r?2:8):i.test(e)?o:+e}},45964:(e,t,r)=>{var a=r(67460),n=r(76685),s=r(36815),o=Math.max,i=Math.min;e.exports=function(e,t,r){var c,l,u,d,f,m,p=0,h=!1,v=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function b(t){var r=c,a=l;return c=l=void 0,p=t,d=e.apply(a,r)}function x(e){var r=e-m,a=e-p;return void 0===m||r>=t||r<0||v&&a>=u}function y(){var e,r,a,s=n();if(x(s))return j(s);f=setTimeout(y,(e=s-m,r=s-p,a=t-e,v?i(a,u-r):a))}function j(e){return(f=void 0,g&&c)?b(e):(c=l=void 0,d)}function N(){var e,r=n(),a=x(r);if(c=arguments,l=this,m=r,a){if(void 0===f)return p=e=m,f=setTimeout(y,t),h?b(e):d;if(v)return clearTimeout(f),f=setTimeout(y,t),b(m)}return void 0===f&&(f=setTimeout(y,t)),d}return t=s(t)||0,a(r)&&(h=!!r.leading,u=(v="maxWait"in r)?o(s(r.maxWait)||0,t):u,g="trailing"in r?!!r.trailing:g),N.cancel=function(){void 0!==f&&clearTimeout(f),p=0,c=m=l=f=void 0},N.flush=function(){return void 0===f?d:j(n())},N}},48611:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},64439:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},64983:(e,t,r)=>{"use strict";r.r(t),r.d(t,{supabase:()=>a});let a=(0,r(34982).UU)("https://fjzbgaflzavzcwfoozcs.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqemJnYWZsemF2emN3Zm9vemNzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDczOTM4ODMsImV4cCI6MjA2Mjk2OTg4M30.mTC_-_hacoYgO4gAhXE1A9QoW-V6oS6UNfozzlrh_w4")},67460:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},68867:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(95155),n=r(45964),s=r.n(n),o=r(12115),i=r(64983);let c=r(23920).A;function l(){let[e,t]=(0,o.useState)([]),[r,n]=(0,o.useState)([]),[l,u]=(0,o.useState)([]),[d,f]=(0,o.useState)([]),[m,p]=(0,o.useState)(0),[h,v]=(0,o.useState)(1e6),g=s()(()=>{n(e.filter(e=>{let t=0===d.length||d.includes(e.brand),r=e.price>=m&&e.price<=h;return t&&r}))},500);(0,o.useEffect)(()=>{(async()=>{let{data:e,error:r}=await i.supabase.from("products").select("*");r?console.error("Тауарларды жүктеу қатесі:",r):(t(e),n(e),u(Array.from(new Set(e.map(e=>e.brand)))))})()},[]),(0,o.useEffect)(()=>{g()},[d,m,h,e]);let b=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("main",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Өнімдер каталогы"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white border p-4 rounded-md",children:[(0,a.jsx)("h2",{className:"font-semibold mb-2",children:"Брендтер"}),l.length>0?l.map(e=>(0,a.jsxs)("label",{className:"block mb-1",children:[(0,a.jsx)("input",{type:"checkbox",className:"mr-2",checked:d.includes(e),onChange:()=>b(e)}),e]},e)):(0,a.jsx)("p",{children:"Брендтер жүктелуде..."}),(0,a.jsx)("h2",{className:"font-semibold mt-4 mb-2",children:"Баға (₸)"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("input",{type:"number",value:m,onChange:e=>{p(Math.max(0,+e.target.value))},className:"border p-1 rounded w-full",placeholder:"Мин"}),(0,a.jsx)("input",{type:"number",value:h,onChange:e=>{v(Math.max(m,+e.target.value))},className:"border p-1 rounded w-full",placeholder:"Макс"})]})]}),(0,a.jsx)("div",{className:"md:col-span-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:r.length>0?r.map(e=>(0,a.jsx)(c,{product:e},e.sku)):(0,a.jsx)("p",{className:"text-gray-500 col-span-full",children:"Тауарлар жоқ"})})]})]})}r(6874)},68915:(e,t,r)=>{Promise.resolve().then(r.bind(r,68867))},70771:(e,t,r)=>{var a=r(98233),n=r(48611);e.exports=function(e){return"symbol"==typeof e||n(e)&&"[object Symbol]"==a(e)}},76685:(e,t,r)=>{var a=r(82500);e.exports=function(){return a.Date.now()}},82500:(e,t,r)=>{var a=r(7985),n="object"==typeof self&&self&&self.Object===Object&&self;e.exports=a||n||Function("return this")()},98233:(e,t,r)=>{var a=r(24376),n=r(20570),s=r(64439),o=a?a.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):s(e)}}},e=>{var t=t=>e(e.s=t);e.O(0,[4982,6874,8441,1684,7358],()=>t(68915)),_N_E=e.O()}]);