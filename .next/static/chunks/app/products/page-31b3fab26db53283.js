(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3571],{58932:(e,t,r)=>{Promise.resolve().then(r.bind(r,71275))},71275:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var s=r(95155),i=r(12115),a=(e,t)=>(e.endsWith("/")&&(e=e.slice(0,-1)),t.startsWith("/")||(t="/"+t),e+t),o=(e,t,r)=>{let s=new globalThis.URL("/"===e.pathname?t:a(e.pathname,t),e);if(r)for(let[e,t]of Object.entries(f(r)))if(t&&"object"==typeof t&&!Array.isArray(t))for(let[r,i]of Object.entries(t))s.searchParams.set(`${e}[${r}]`,String(i));else s.searchParams.set(e,t);return s};async function n(e){if(!("object"!=typeof e||!e)){if("object"==typeof e&&e&&"headers"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json&&"text"in e&&"function"==typeof e.json){let t=e.headers.get("Content-Type")?.toLowerCase();if(t?.startsWith("application/json")||t?.startsWith("application/health+json")){let t=await e.json();if(!e.ok||"errors"in t)throw t;return"data"in t?t.data:t}if(t?.startsWith("text/html")||t?.startsWith("text/plain")){let t=await e.text();if(!e.ok)throw t;return t}return 204===e.status?null:e}if("errors"in e)throw e;return"data"in e?e.data:e}}var l=async(e,t,r=globalThis.fetch)=>(t.headers="object"!=typeof t.headers||Array.isArray(t.headers)?{}:t.headers,r(e,t).then(e=>n(e).catch(t=>{let r={errors:t&&"object"==typeof t&&"errors"in t?t.errors:t,response:e};return t&&"object"==typeof t&&"data"in t&&(r.data=t.data),Promise.reject(r)}))),c={fetch:globalThis.fetch,WebSocket:globalThis.WebSocket,URL:globalThis.URL,logger:globalThis.console},d=e=>{let t=(e,r=[])=>{if("object"==typeof e){let s=[];for(let i in e){let a=e[i]??[];if(Array.isArray(a))for(let e of a)s.push(t(e,[...r,i]));else if("object"==typeof a)for(let e of Object.keys(a))for(let o of a[e])s.push(t(o,[...r,`${i}:${e}`]))}return s.flatMap(e=>e)}return[...r,String(e)].join(".")};return e.flatMap(e=>t(e))},f=e=>{let t={};for(let[r,s]of(Array.isArray(e.fields)&&e.fields.length>0&&(t.fields=d(e.fields).join(",")),e.filter&&Object.keys(e.filter).length>0&&(t.filter=JSON.stringify(e.filter)),e.search&&(t.search=e.search),"sort"in e&&e.sort&&(t.sort="string"==typeof e.sort?e.sort:e.sort.join(",")),"number"==typeof e.limit&&e.limit>=-1&&(t.limit=String(e.limit)),"number"==typeof e.offset&&e.offset>=0&&(t.offset=String(e.offset)),"number"==typeof e.page&&e.page>=1&&(t.page=String(e.page)),e.deep&&Object.keys(e.deep).length>0&&(t.deep=JSON.stringify(e.deep)),e.alias&&Object.keys(e.alias).length>0&&(t.alias=JSON.stringify(e.alias)),e.aggregate&&Object.keys(e.aggregate).length>0&&(t.aggregate=JSON.stringify(e.aggregate)),e.groupBy&&e.groupBy.length>0&&(t.groupBy=e.groupBy.join(",")),Object.entries(e)))r in t||("string"==typeof s||"number"==typeof s||"boolean"==typeof s?t[r]=String(s):t[r]=JSON.stringify(s));return t},h=(e,t)=>{if(0===e.length)throw Error(t)},u=(e,t)=>{if(["directus_access","directus_activity","directus_collections","directus_comments","directus_fields","directus_files","directus_folders","directus_migrations","directus_permissions","directus_policies","directus_presets","directus_relations","directus_revisions","directus_roles","directus_sessions","directus_settings","directus_users","directus_webhooks","directus_dashboards","directus_panels","directus_notifications","directus_shares","directus_flows","directus_operations","directus_translations","directus_versions","directus_extensions"].includes(String(e)))throw Error(t)},g=(e,t)=>()=>(h(String(e),"Collection cannot be empty"),u(e,"Cannot use readItems for core collections"),{path:`/items/${e}`,params:t??{},method:"GET"}),p={};let y=((e,t={})=>{let r=t.globals?{...c,...t.globals}:c;return{globals:r,url:new r.URL(e),with(e){return{...this,...e(this)}}}})("https://directus-protel.onrender.com").with(((e={})=>t=>{let r={...p,...e};return{async request(s){let i=s();if(i.headers||(i.headers={}),"Content-Type"in i.headers?"multipart/form-data"===i.headers["Content-Type"]&&delete i.headers["Content-Type"]:i.headers["Content-Type"]="application/json","getToken"in this&&!("Authorization"in i.headers)){let e=await this.getToken();e&&(i.headers.Authorization=`Bearer ${e}`)}let a=o(t.url,i.path,i.params),n={method:i.method??"GET",headers:i.headers??{}};"credentials"in r&&(n.credentials=r.credentials),i.body&&(n.body=i.body),i.onRequest&&(n=await i.onRequest(n)),r.onRequest&&(n=await r.onRequest(n));let c=await l(a.toString(),n,t.globals.fetch);return"onResponse"in i&&(c=await i.onResponse(c,n)),"onResponse"in e&&(c=await e.onResponse(c,n)),c}}})()),m=async()=>{try{return await y.request(g("categories"))}catch(e){return console.error("Ошибка загрузки категорий:",e),[]}},b=async()=>{try{let e=await fetch("https://directus-protel.onrender.com/items/products?fields=id,name,price,description,in_stock,category_id.id,category_id.name,images.directus_files_id.id,images.directus_files_id.filename_disk",{headers:{Authorization:"Bearer ".concat("d8xOZE2kJxKWgaSD5uDRxc_nTQgiKqgk")}});if(!e.ok)throw Error("Ошибка HTTP: ".concat(e.status));return(await e.json()).data}catch(e){return console.error("Ошибка загрузки товаров:",e),[]}};function _(){let[e,t]=(0,i.useState)([]),[r,a]=(0,i.useState)([]),[o,n]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{try{let e=await m(),r=await b();t(e),a(r)}catch(e){console.error("Ошибка загрузки данных:",e)}})()},[]);let l=o?r.filter(e=>{var t;return(null==(t=e.category_id)?void 0:t.id)===o}):r;return(0,s.jsxs)("main",{className:"bg-[#121212] text-white min-h-screen px-6 py-10",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Каталог товаров"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-3 mb-8",children:[(0,s.jsx)("button",{onClick:()=>n(null),className:"px-4 py-2 rounded-lg border ".concat(null===o?"bg-[#c1121f] text-white":"bg-[#1f1f1f]"),children:"Все категории"}),e.map(e=>(0,s.jsx)("button",{onClick:()=>n(e.id),className:"px-4 py-2 rounded-lg border ".concat(o===e.id?"bg-[#c1121f] text-white":"bg-[#1f1f1f]"),children:e.name},e.id))]}),l.length>0?(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:l.map(e=>(0,s.jsxs)("div",{className:"bg-[#1e1e1e] p-4 rounded-lg shadow",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:e.name}),(0,s.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:e.description}),(0,s.jsxs)("p",{className:"font-bold text-[#c1121f]",children:[e.price," ₸"]})]},e.id))}):(0,s.jsx)("p",{className:"text-gray-400 mt-10",children:"Нет товаров в этой категории."})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(58932)),_N_E=e.O()}]);